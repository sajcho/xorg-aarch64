# Description:	X keyboard configuration database
# URL:		https://cgit.freedesktop.org/xkeyboard-config/
# Maintainer:	sajcho, saux dot aarch64 at gmail dot com
# Depends on:	intltool xkbcomp

name=xkeyboard-config
version=2.34
release=2
source=(https://www.x.org/releases/individual/data/${name}/${name}-${version}.tar.bz2)

build() {
	cd ${name}-${version}

	build-meson \
		-Dcompat-rules=true \
		-Dxorg-rules-symlinks=true \
		-Dxkb-base=/usr/share/X11/xkb \
		. build

	meson configure build

	meson compile ${JOBS:+-j ${JOBS}} -v -C build

	DESTDIR=$PKG meson install --no-rebuild -C build

	install -m 0755 -d $PKG/var/lib/xkb
	ln -s /var/lib/xkb $PKG/usr/share/X11/xkb/compiled

	rm -r $PKG/usr/share/locale
	find $PKG -name README -delete
}
